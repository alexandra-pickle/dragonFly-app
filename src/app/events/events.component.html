<div class="loader" *ngIf="isLoading"></div>

<div class="container listContainer" *ngIf="!isLoading">
    <div *ngFor="let event of events | slice: startIndex : endIndex; let i=index" clas="row">
        <div class="card d-flex flex-row justify-content-start my-flex-container">
            <div class="form-check eventCheckbox p-2" *ngIf="event.isGoing !== undefined">
                <input  class="form-check-input"
                        type="checkbox"  
                        [(ngModel)]="event.isGoing"
                        (change)="changeEventStatus(event.id, event.isGoing)">
            </div>
            <div class="card-body p-2 align-items-start">
               <img *ngIf="event.imageSrc" class="card-img-right flex-auto" [src]="event.imageSrc" />

                <h3 class="mb-0">
                    <a class="text-primary eventName" (click)="event.isDisplayComments = !event.isDisplayComments">
                        {{event.name}}
                    </a>
                </h3>
                <strong class="d-inline-block mb-2 text-dark">{{event.date | date}}</strong>
                <div class="mb-1 text-muted">
                    <span>{{event.location.name}}</span><br />
                    <span>{{event.location.address}}, </span>
                    <span>{{event.location.city}}, </span>
                    <span>{{event.location.state}}</span>
                </div>
                <p class="card-text mb-auto">{{event.description}}.</p>

                <strong class="d-inline-block mb-2 text-dark" *ngIf="event.isDisplayComments" style="margin-top:20px;">COMMENTS</strong>
                <ul class="list-group mb-3 commentsContainer" *ngIf="event.isDisplayComments">
                    <li class="d-flex justify-content-between lh-condensed" *ngFor="let comment of event.comments">
                        <div>
                            <h6 class="my-0">{{comment.from}}</h6>
                            <small>{{comment.text}}</small>
                        </div>
                    </li>                
                </ul>
            </div>
        </div>
    </div>
    <button *ngIf="events.length > 10" [ngClass]="{ 'disabled' : endIndex === events.length - 1}" type="button" class="btn btn-primary" (click)="loadMoreEvents()">Load more</button>
</div>